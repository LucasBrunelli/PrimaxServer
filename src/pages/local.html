<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Primax Location </title>

    <style>
        body {
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            background-color: #121212; /* Cor de fundo escura */
            color: #ffffff; /* Cor do texto clara */
            font-family: Arial, sans-serif; /* Fonte padrão */
        }

        h1 {
            margin-bottom: 20px;
        }

        .botoes-container {
            width: 100%;
            display: flex;
            flex-wrap: wrap; /* Permite que os botões quebrem para a linha seguinte, se necessário */
            gap: 10px; /* Adiciona espaço entre os botões */
        }

        .botoes-container a {
            flex: 1; /* Cada botão ocupa uma parte igual do contêiner */
        }

        button {
            width: 100%;
            background-color: #424242;
            color: #ffffff;
            border: none;
            padding: 10px;
            cursor: pointer;
        }

        #map {
            width: 100%;
            height: 430px;
            margin-top: 20px;
            position: relative;
        }

    </style>

</head>
<body onload="initMap()">
  
    <h1> Primax Bike Location </h1>

    <div class="botoes-container">
        <a href="/">
            <button>Primax Home</button>
        </a>

        <a href="terminal">
            <button>Bike Terminal</button>
        </a>

        <a href="bootloader">
            <button>Bike Bootloader</button>
        </a>

        <a href="local">
            <button>Primax GPS</button>
        </a>
    </div>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCrfa1EuP78q3dI7Pm7B0RL1UTNKjXvRrw"></script>

    <div id="map"></div>

    <script>

        function initMap() {

            // const locationData = detectLocation();
            // const matches = locationData.match(/lat:(-?\d+\.\d+) lng:(-?\d+\.\d+)/);
            // let latgps = parseFloat(matches[1]);
            // let lnggps = parseFloat(matches[2]); 
            let latgps = -19.9070339;
            let lnggps = -43.9259224;

            var map = new google.maps.Map(document.getElementById("map"), {
              center: { lat: latgps, lng: lnggps },
              zoom: 15,
              mapTypeId: "roadmap",
            });
          
            var marker = new google.maps.Marker({
              map: map,
              position: { lat: latgps, lng: lnggps },
            });

            var blueDot = "https://i.imgur.com/elyw5s1.png";
            marker.setIcon(blueDot);
        }

        // setInterval(function () {

        //     const locationData = detectLocation();
        //     const matches = locationData.match(/lat:(-?\d+\.\d+) lng:(-?\d+\.\d+)/);

        //     if (matches) {
        //         let lat = parseFloat(matches[1]);
        //         let lng = parseFloat(matches[2]);
        //     } else {
        //         console.error("Formato de dados inválido");
        //     }
            
        // }, 500);

        function detectLocation(){
            fetch('https://primaxserver-7786a1841f16.herokuapp.com/obter-dados/0000004')
                  .then(response => response.json())
                  .then(data => {                     
                      const gpsLocation = data.parametros;
                      return gpsLocation;
                  })
                  .catch(error => {
                      console.error('Erro ao obter dados:', error);
                  });
        }       

    </script>

    <!-- <iframe
        width=100%
        height="500"
        style="border: 0; margin-top: 20px;"
        loading="lazy"
        allowfullscreen
        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCrfa1EuP78q3dI7Pm7B0RL1UTNKjXvRrw&q=-19.9070339,-43.9259224">
    </iframe> -->

</body>
</html>